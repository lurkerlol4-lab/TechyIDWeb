<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Techy-ID Co. â€” Multi Name Scanner</title>

  <!-- Fonts & Styles -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <section class="card">
      <h2>ğŸ“· Scan Names</h2>
      <p>Upload a picture containing multiple names (one per line).</p>
      <input type="file" id="image-input" accept="image/*" onchange="previewImage(event)">
      <img id="preview" class="preview" style="display:none;">
      <button class="btn btn-primary" onclick="scanImage()">Scan Now</button>
      <div id="scan-result" class="result"></div>
    </section>

    <section class="card">
      <h2>ğŸ“ Name List</h2>
      <p>Enter valid names (one per line):</p>
      <textarea id="name-list" class="input" rows="6" placeholder="Type or paste names here..."></textarea>
    </section>
  </div>

  <!-- OCR Library -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
  <script>
    let selectedImage=null;
    function previewImage(event){
      const file=event.target.files[0];
      if(file){
        const reader=new FileReader();
        reader.onload=function(e){
          const img=document.getElementById("preview");
          img.src=e.target.result;
          img.style.display="block";
          selectedImage=e.target.result;
        }
        reader.readAsDataURL(file);
      }
    }

    async function scanImage(){
      const scanResult=document.getElementById("scan-result");
      if(!selectedImage){
        scanResult.textContent="Please upload an image first.";
        return;
      }
      scanResult.textContent="Scanning...";
      const {data:{text}}=await Tesseract.recognize(selectedImage,'eng');
      const scannedNames=text.split("\n").map(n=>n.trim()).filter(n=>n);
      checkNames(scannedNames);
    }

    function checkNames(scannedNames){
      const scanResult=document.getElementById("scan-result");
      const listText=document.getElementById("name-list").value;
      const validNames=listText.split("\n").map(n=>n.trim().toLowerCase()).filter(n=>n);
      if(scannedNames.length===0){
        scanResult.textContent="No names detected.";
        return;
      }
      let html=`<table><tr><th>Scanned Name</th><th>Status</th></tr>`;
      scannedNames.forEach(name=>{
        const clean=name.toLowerCase();
        if(validNames.includes(clean)){
          html+=`<tr><td>${name}</td><td class="check">âœ” Found</td></tr>`;
        } else {
          html+=`<tr><td>${name}</td><td class="xmark">âœ˜ Not Found</td></tr>`;
        }
      });
      html+="</table>";
      scanResult.innerHTML=html;
    }
  </script>
</body>
</html>
